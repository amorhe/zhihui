{"version":3,"sources":["detail.js"],"names":[],"mappings":"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","file":"detail-compile.js","sourcesContent":["function removeSameItem(arr) {\r\n    return Array.from(new Set(arr))\r\n}\r\n\r\nlet app = new Vue({\r\n    el: \"#app\",\r\n    data: {\r\n        dataSelect: -1,\r\n        jssdkconfig: '',\r\n        baseImgUrl: ImgBaseUrl,\r\n        show3: false,\r\n        selected: -1,\r\n        status: '',\r\n        store_id: '',\r\n        alert: false,\r\n        detail: {},\r\n        longitude_latitude: '',\r\n        page: 1,\r\n        allLoaded: true,\r\n        loading: false,//判断是否加载数据\r\n        loading_more: true,//控制是否发送ajax请求\r\n    },\r\n    computed: {\r\n        timeSel() {\r\n            if (this.detail.shop_goods_time) {\r\n                let arr = []\r\n                arr = this.detail.shop_goods_time.map(item => item.rule)\r\n                arr = removeSameItem(arr)\r\n                return arr\r\n            }\r\n        }\r\n    },\r\n    mounted() {\r\n        //路由拦截。。。\r\n        if (!localStorage.longitude_latitude) {\r\n            location.assign('./index.html')\r\n        }\r\n\r\n        var mySwiper = new Swiper('.swiper-container', {\r\n            width: innerWidth,\r\n            slidesPerView: 6,\r\n            freeMode: true,\r\n            observer: true,//修改swiper自己或子元素时，自动初始化swiper\r\n            observeParents: true,//修改swiper的父元素时，自动初始化swiper\r\n        })\r\n\r\n        let store_id = this.GetQueryString('id')\r\n        this.store_id = store_id\r\n        let status = this.GetQueryString('status')\r\n        this.status = status\r\n        setTimeout(() => {\r\n            // this.getWxConfig()\r\n            this.getStoreList(this.store_id, localStorage.longitude_latitude, this.status)\r\n        })\r\n    },\r\n    methods: {\r\n        async getWxConfig() {\r\n            let that = this\r\n            let url = window.location.href\r\n            console.log(url)\r\n            let result = await wxConfig(url)\r\n            result = JSON.parse(result.data)\r\n            this.jssdkconfig = result\r\n            console.log(result)\r\n            jssdkconfig = this.jssdkconfig\r\n            if (jssdkconfig) {\r\n                localStorage.setItem('jsdk', jssdkconfig)\r\n                console.log(jssdkconfig.appId, jssdkconfig.timestamp, jssdkconfig.nonceStr, jssdkconfig.signature)\r\n            }\r\n\r\n            wx.config({\r\n                debug: false,\r\n                appId: jssdkconfig.appId,\r\n                timestamp: jssdkconfig.timestamp,\r\n                nonceStr: jssdkconfig.nonceStr,\r\n                signature: jssdkconfig.signature,\r\n                jsApiList: [\r\n                    'openLocation',\r\n                    'getLocation',\r\n                ]\r\n            });\r\n            wx.ready(function () {\r\n                wx.checkJsApi({\r\n                    jsApiList: [\r\n                        'getNetworkType',\r\n                        'previewImage',\r\n                        'getLocation'\r\n                    ],\r\n                    success: function (res) {\r\n                        console.log(JSON.stringify(res));\r\n                    }\r\n                });\r\n            })\r\n\r\n            wx.error(function (res) {\r\n                console.log(`err:${res}`)\r\n                // config信息验证失败会执行error函数，如签名过期导致验证失败，具体错误信息可以打开config的debug模式查看，也可以在返回的res参数中查看，对于SPA可以在这里更新签名。\r\n            });\r\n            // https://shop.zhihuimall.com.cn/app/index.php?i=1604&c=entry&mid=8811&do=shop&m=vslai_shop&p=location&latitude=30.25961&longitude=120.13026\r\n\r\n        },\r\n        selectDate(index) {\r\n            this.dataSelect = index\r\n        },\r\n        toMap() {\r\n            let that = this\r\n            wx.openLocation({\r\n                latitude: that.detail.longitude_latitude.split(',')[1] - 0, // 纬度，浮点数，范围为90 ~ -90\r\n                longitude: that.detail.longitude_latitude.split(',')[0] - 0, // 经度，浮点数，范围为180 ~ -180。\r\n                name: that.detail.shop_name, // 位置名\r\n                address: that.detail.address, // 地址详情说明\r\n                scale: 14, // 地图缩放级别,整形值,范围从1~28。默认为最大\r\n                infoUrl: '' // 在查看位置界面底部显示的超链接,可点击跳转\r\n            });\r\n        },\r\n        toDetail() {\r\n            location.href = './room_booking.html'\r\n        },\r\n        back() {\r\n            history.go(-1)\r\n        },\r\n        showDetail(i) {\r\n            if (this.show3 === i){\r\n                this.show3 = -1\r\n            }else{\r\n                this.show3 = i\r\n            }\r\n        },\r\n        async filterTime(v, i) {\r\n            this.selected = i\r\n            await this.getStoreList(this.store_id, this.longitude_latitude, this.status)\r\n            if (this.detail.shop_goods) {\r\n                this.detail.shop_goods = this.detail.shop_goods.filter(item => item.rule === v)\r\n            }\r\n\r\n        },\r\n        GetQueryString(name) {\r\n            let reg = new RegExp(\"(^|&)\" + name + \"=([^&]*)(&|$)\");\r\n            let r = window.location.search.substr(1).match(reg);\r\n            if (r != null) return unescape(r[2]);\r\n            return null;\r\n        },\r\n        async getStoreList(store_id, longitude_latitude, status) {\r\n            let result = await allShopGoodList(store_id, longitude_latitude, status)\r\n            if (result.code === 0) {\r\n                alert(result.message)\r\n            }\r\n            if (result.code === 1) {\r\n                console.log(result.data)\r\n                this.detail = result.data\r\n            }\r\n        },\r\n        async getOrderList(goods_id,rule,preset_time){\r\n            let result = await orderList(uid,this.GetQueryString('id'),goods_id,rule,preset_time,preset_time,realprice)\r\n        }\r\n    }\r\n})\r\n"]}
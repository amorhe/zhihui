{"version":3,"sources":["searchResult.js"],"names":[],"mappings":"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","file":"searchResult-compile.js","sourcesContent":["let app = new Vue({\r\n    el: \"#app\",\r\n    data: {\r\n        jssdkconfig: '',\r\n        baseImgUrl: ImgBaseUrl,\r\n        allSortList: [],\r\n        sort_status: 1,\r\n        sortPage: 1,\r\n        index_foot: [1, 0, 0],\r\n        address: '',\r\n        allLoaded: true,\r\n        loading: false,//判断是否加载数据\r\n        loading_more: true,//控制是否发送ajax请求\r\n    },\r\n    computed: {\r\n        cate() {\r\n            let arr = []\r\n            let arr2 = []\r\n            this.shopCateListData.forEach(c => {\r\n                if (arr2.length === 8) {\r\n                    arr2 = []\r\n                }\r\n                if (arr2.length === 0) {\r\n                    arr.push(arr2)\r\n                }\r\n                arr2.push(c)\r\n            })\r\n            return arr\r\n        }\r\n    },\r\n    methods: {\r\n        goToSearch(){\r\n            location.assign('./search.html')\r\n        },\r\n        GetQueryString(name) {\r\n            let reg = new RegExp(\"(^|&)\" + name + \"=([^&]*)(&|$)\");\r\n            let r = window.location.search.substr(1).match(reg);\r\n            if (r != null) return unescape(r[2]);\r\n            return null;\r\n        },\r\n        async getShopGoodsSearchList() {\r\n            let search_key = this.getRequest().search_key\r\n            let uid = localStorage.uid\r\n            let result = await shopGoodsSearchList(search_key, longitude_latitude, uid,area_id)\r\n            if (result.code === 1){\r\n                if(result.data !== null){\r\n                    let obj = {}\r\n                    let arr = []\r\n                    for (let i = 0; i < result.data.length; i++){\r\n                        // console.log(result.data[i]);\r\n                        if (result.data[i] !== null){\r\n                            for (let a in result.data[i]){\r\n                                // console.log(a);\r\n                                // console.log(result.data[i][a]);\r\n                                obj[a] = result.data[i][a]\r\n                                // console.log(`obj:${JSON.stringify(obj)}`);\r\n                            }\r\n                            arr.push(obj)\r\n                            // console.log(arr);\r\n                        }\r\n                    }\r\n                    this.allSortList = arr\r\n                    console.log(this.allSortList);\r\n                    console.log(typeof result.data[0])\r\n                }\r\n\r\n            }\r\n        },\r\n        async loadingMore() {\r\n            if (this.allLoaded === false) {\r\n                return\r\n            }\r\n            if ($(window).scrollTop() + $(window).height() + 100 >= $(document).height()) {\r\n                // console.log(1)\r\n                this.allLoaded = false\r\n                this.loading = true;\r\n                this.sortPage++;\r\n                let result\r\n                if (this.loading_more) {\r\n                    this.loading_more = false //禁止浏览器发送ajax请求\r\n                    result = await allSort(this.sort_status, longitude_latitude, this.sortPage)\r\n                    if (result.code === 1) {//判断接受是否成功\r\n                        this.loading = false\r\n                        console.log(this.allSortList.length, result.data.total)\r\n                        if (this.allSortList.length === result.data.total) {\r\n                            return\r\n                        } else {\r\n                            this.loading_more = true\r\n                            let obj = {}\r\n                            let arr = []\r\n                            if (result.code === 1){\r\n                                if(result.data !== null){\r\n                                    for (let i = 0; i < result.data.length; i++){\r\n                                        // console.log(result.data[i]);\r\n                                        if (result.data[i] !== null){\r\n                                            for (let a in result.data[i]){\r\n                                                // console.log(a);\r\n                                                // console.log(result.data[i][a]);\r\n                                                obj[a] = result.data[i][a]\r\n                                                // console.log(`obj:${JSON.stringify(obj)}`);\r\n                                            }\r\n                                            arr.push(obj)\r\n                                            // console.log(arr);\r\n                                        }\r\n                                    }\r\n                                    this.allSortList = arr\r\n                                    console.log(this.allSortList);\r\n                                    console.log(typeof result.data[0])\r\n                                }\r\n                            }\r\n                            this.allSortList = [...this.allSortList, ...arr];\r\n                        }\r\n                    } else {\r\n                        setTimeout(() => {\r\n                            this.loading = false\r\n                            this.loading_more = true\r\n                        }, 1000)\r\n                    }\r\n                } else {\r\n                    this.loading = false\r\n                }\r\n            }\r\n        },\r\n        goTo(url, id, longitude_latitude, status) {\r\n            location.assign(`${url}?id=${id}&status=${status}`)\r\n        },\r\n        getRequest() {\r\n            var url = window.location.search; //获取url中\"?\"符后的字串\r\n            var theRequest = new Object();\r\n            if (url.indexOf(\"?\") != -1) {\r\n                var str = url.substr(1);\r\n                var strs = str.split(\"&\");\r\n                for (var i = 0; i < strs.length; i++) {\r\n                    theRequest[strs[i].split(\"=\")[0]] = decodeURI(strs[i].split(\"=\")[1]);\r\n                }\r\n            }\r\n            return theRequest;\r\n        },\r\n    },\r\n    created() {\r\n        //路由拦截。。。\r\n        if (!localStorage.longitude_latitude) {\r\n            location.assign('./index.html')\r\n        }\r\n\r\n        setTimeout(() => {\r\n            this.getShopGoodsSearchList()\r\n        })\r\n    },\r\n\r\n    mounted() {\r\n\r\n    },\r\n})\r\n"]}